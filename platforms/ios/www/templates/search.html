<ion-view hide-back-button="true">

    <div id="searchForm" class="search-bar">
        <form class="search-form" ng-submit="search()">
            <div class="item-input-wrapper search-wrapper">
                <i class="icon white-icon icon-search"></i>
                <input id="searchControl" type="search" placeholder="Search" ng-model="searchKey" class="search-control" />
                <i ng-if="searchKey" ng-click="$event.stopImmediatePropagation(); $event.preventDefault(); clearSearch();" class="icon white-icon icon-cancel"></i>
            </div>
        </form>
    </div>

    <div class="filter-bar">
        <!--<button class="button button-full bar-light" ng-click="gotoFilter">FILTER ></button>-->
        <a class="title bar-light" href="{{getFilterURL()}}" ng-click="cacheSearchKey()">FILTER <i class="icon-arrow-down"></i></a>
    </div>

    <ion-content class="has-header has-subheader has-footer search-pane-content" delegate-handle="searchResultScroll">
      <!--Page: {{currentPage}}  Total shown: {{pageSize}}-->
        <ion-list>
          <!-- was ng-repeat -->
          <div ng-if="noEmployeeFound" class="search-result search-no-result">
            We cannot find any employee profiles that match this search criteria.
          </div>
            <ion-item class="item-avatar item-icon-right"
                      ng-class="$index%2 == 0 ? 'search-list-row-even' : 'search-list-row'"
                      collection-repeat="employee in employeeList| limitTo:pageSize" type="item-text-wrap" href="{{getProfileURL(employee.id)}}">
                <img ng-src="{{getPicture(employee.id)}}" onerror="this.src='img/default-user.jpg'" />
                <div class="search-result">
                    <div class="search-result-title" ng-bind-html="getName(employee)"></div>
                    <div class="search-result-data" ng-bind-html="getTitle(employee)"></div>
                </div>
                <!--<i class="icon ion-chevron-right"></i>-->
            </ion-item>
        </ion-list>

        <div ng-show="smrBlock" class="load-more-results" ng-click="updatePage()">
            <div class="more-results">More</div>
            <div class="results-count">[ {{itemCount}} / {{employeeList.length}} ]</div>
        </div>
        <ion-fixed class="scroll-to-top" ng-click="scrollToTop()" ng-if="employeeSearchExist && !noEmployeeFound">
              Top <i class="ion-arrow-up-a"></i>
        </ion-fixed>
    </ion-content>
</ion-view>
